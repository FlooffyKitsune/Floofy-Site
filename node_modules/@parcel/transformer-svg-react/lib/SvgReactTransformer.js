"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

function _plugin() {
  const data = require("@parcel/plugin");

  _plugin = function () {
    return data;
  };

  return data;
}

function _path() {
  const data = _interopRequireDefault(require("path"));

  _path = function () {
    return data;
  };

  return data;
}

function _camelcase() {
  const data = _interopRequireDefault(require("camelcase"));

  _camelcase = function () {
    return data;
  };

  return data;
}

function _pluginSvgo() {
  const data = _interopRequireDefault(require("@svgr/plugin-svgo"));

  _pluginSvgo = function () {
    return data;
  };

  return data;
}

function _pluginJsx() {
  const data = _interopRequireDefault(require("@svgr/plugin-jsx"));

  _pluginJsx = function () {
    return data;
  };

  return data;
}

function _core() {
  const data = require("@svgr/core");

  _core = function () {
    return data;
  };

  return data;
}

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function getComponentName(filePath) {
  let name = _path().default.parse(filePath).name.replace(/[^a-zA-Z0-9_-]/g, '');

  return (0, _camelcase().default)(name, {
    pascalCase: true
  });
}

var _default = new (_plugin().Transformer)({
  async transform({
    asset
  }) {
    let code = await asset.getCode();
    let componentName = getComponentName(asset.filePath);
    const jsx = await (0, _core().transform)(code, {}, {
      caller: {
        name: '@parcel/transformer-svg-react',
        defaultPlugins: [_pluginSvgo().default, _pluginJsx().default]
      },
      filePath: componentName
    });
    asset.type = 'jsx';
    asset.bundleBehavior = null;
    asset.setCode(jsx);
    return [asset];
  }

});

exports.default = _default;